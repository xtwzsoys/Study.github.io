<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>74HC573锁存器交互式仿真学习平台</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif;
        }
        
        :root {
            --primary: #3498db;
            --secondary: #2980b9;
            --accent: #e74c3c;
            --dark: #2c3e50;
            --light: #ecf0f1;
            --gray: #7f8c8d;
            --success: #2ecc71;
            --warning: #f39c12;
        }
        
        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            color: var(--dark);
            line-height: 1.6;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            margin-bottom: 40px;
            padding: 30px;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
            position: relative;
            overflow: hidden;
        }
        
        header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: linear-gradient(90deg, var(--primary), var(--accent));
        }
        
        h1 {
            font-size: 2.8rem;
            color: var(--dark);
            margin-bottom: 10px;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.1);
        }
        
        .subtitle {
            font-size: 1.3rem;
            color: var(--gray);
            max-width: 700px;
            margin: 0 auto 20px;
        }
        
        .header-icons {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
        }
        
        .header-icon {
            font-size: 2rem;
            color: var(--primary);
            animation: float 3s ease-in-out infinite;
        }
        
        .header-icon:nth-child(2) {
            animation-delay: 0.5s;
        }
        
        .header-icon:nth-child(3) {
            animation-delay: 1s;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        
        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 40px;
        }
        
        @media (max-width: 1100px) {
            .main-content {
                grid-template-columns: 1fr;
            }
        }
        
        .simulator-section, .cards-section {
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .section-header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 20px;
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .section-header i {
            font-size: 1.5rem;
        }
        
        .section-title {
            font-size: 1.6rem;
            margin: 0;
        }
        
        .simulator-container {
            padding: 25px;
        }
        
        .chip-container {
            position: relative;
            margin: 30px auto;
            width: 320px;
            height: 220px;
        }
        
        .chip-body {
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #34495e, #2c3e50);
            border-radius: 10px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: white;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            position: relative;
            overflow: hidden;
        }
        
        .chip-body::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, transparent 30%, rgba(255,255,255,0.1) 50%, transparent 70%);
            animation: shine 3s infinite linear;
        }
        
        @keyframes shine {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }
        
        .chip-name {
            font-size: 1.8rem;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .chip-type {
            font-size: 0.9rem;
            color: #bdc3c7;
            margin-bottom: 15px;
        }
        
        .chip-pins {
            display: flex;
            justify-content: space-between;
            width: 100%;
            padding: 0 20px;
            margin-top: 10px;
        }
        
        .left-pins, .right-pins {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        
        .pin {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .pin-left {
            flex-direction: row;
        }
        
        .pin-right {
            flex-direction: row-reverse;
        }
        
        .pin-dot {
            width: 14px;
            height: 14px;
            border-radius: 50%;
            background: #7f8c8d;
            transition: all 0.3s ease;
            position: relative;
        }
        
        .pin.active .pin-dot {
            background: var(--success);
            box-shadow: 0 0 10px var(--success);
        }
        
        .pin.input.active .pin-dot {
            background: var(--warning);
            box-shadow: 0 0 10px var(--warning);
        }
        
        .pin-label {
            font-size: 0.9rem;
            color: var(--light);
        }
        
        .data-flow {
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 15px 0;
            gap: 10px;
        }
        
        .arrow {
            font-size: 1.5rem;
            color: var(--primary);
            transition: all 0.3s ease;
        }
        
        .arrow.active {
            color: var(--success);
            animation: pulse 1s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        .controls {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 30px;
        }
        
        .control-group {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            border-left: 4px solid var(--primary);
        }
        
        .control-title {
            font-size: 1.2rem;
            margin-bottom: 15px;
            color: var(--dark);
        }
        
        .bits-container {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .bit {
            width: 40px;
            height: 40px;
            display: flex;
            justify-content: center;
            align-items: center;
            background: #e9ecef;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
            user-select: none;
        }
        
        .bit.active {
            background: var(--warning);
            color: white;
        }
        
        .bit.output.active {
            background: var(--success);
            color: white;
        }
        
        .button-group {
            display: flex;
            gap: 10px;
            margin: 15px 0;
            flex-wrap: wrap;
        }
        
        .btn {
            padding: 10px 15px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
        }
        
        .btn:hover {
            background: var(--secondary);
            transform: translateY(-2px);
        }
        
        .btn.active {
            background: var(--success);
        }
        
        .btn.warning {
            background: var(--warning);
        }
        
        .btn.danger {
            background: var(--accent);
        }
        
        .status-panel {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
            border-left: 4px solid var(--primary);
        }
        
        .status-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            padding-bottom: 10px;
            border-bottom: 1px solid #e9ecef;
        }
        
        .status-item:last-child {
            margin-bottom: 0;
            padding-bottom: 0;
            border-bottom: none;
        }
        
        .status-label {
            font-weight: bold;
            color: var(--dark);
        }
        
        .status-value {
            color: var(--gray);
        }
        
        .status-value.active {
            color: var(--success);
            font-weight: bold;
        }
        
        .guide-panel {
            background: #e8f4fc;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            border-left: 4px solid var(--primary);
        }
        
        .guide-title {
            font-size: 1.2rem;
            margin-bottom: 15px;
            color: var(--dark);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .guide-steps {
            list-style-type: decimal;
            padding-left: 20px;
        }
        
        .guide-steps li {
            margin-bottom: 10px;
            padding-left: 5px;
        }
        
        .cards-container {
            padding: 25px;
            display: grid;
            grid-template-columns: 1fr;
            gap: 25px;
            max-height: 800px;
            overflow-y: auto;
        }
        
        .card {
            background: white;
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
            overflow: hidden;
            transition: all 0.3s ease;
            border-left: 5px solid var(--primary);
            cursor: pointer;
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.15);
        }
        
        .card-header {
            padding: 20px;
            display: flex;
            align-items: center;
            gap: 15px;
            background: #f8f9fa;
            transition: all 0.3s ease;
        }
        
        .card:hover .card-header {
            background: #e8f4fc;
        }
        
        .card-icon {
            font-size: 1.8rem;
            color: var(--primary);
        }
        
        .card-title {
            font-size: 1.4rem;
            margin: 0;
            color: var(--dark);
        }
        
        .card-content {
            padding: 0 20px;
            max-height: 0;
            overflow: hidden;
            transition: all 0.5s ease;
        }
        
        .card.active .card-content {
            padding: 20px;
            max-height: 1000px;
        }
        
        .code-block {
            background: #2c3e50;
            color: var(--light);
            padding: 15px;
            border-radius: 8px;
            font-family: 'Consolas', monospace;
            margin: 15px 0;
            overflow-x: auto;
            font-size: 0.9rem;
            border-left: 4px solid var(--accent);
        }
        
        .code-line {
            margin: 5px 0;
        }
        
        .code-comment {
            color: #7f8c8d;
        }
        
        .code-keyword {
            color: #e74c3c;
        }
        
        .code-function {
            color: #3498db;
        }
        
        .code-var {
            color: #f39c12;
        }
        
        .code-value {
            color: #2ecc71;
        }
        
        .highlight {
            color: var(--accent);
            font-weight: bold;
        }
        
        .analogy {
            background: #e8f4fc;
            border-left: 4px solid var(--primary);
            padding: 15px;
            margin: 15px 0;
            border-radius: 0 8px 8px 0;
        }
        
        .analogy strong {
            color: var(--secondary);
        }
        
        .explanation-list {
            margin: 15px 0;
            padding-left: 20px;
        }
        
        .explanation-list li {
            margin-bottom: 10px;
        }
        
        footer {
            text-align: center;
            padding: 30px;
            color: var(--gray);
            background: white;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .footer-links {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 15px;
        }
        
        .footer-link {
            color: var(--primary);
            text-decoration: none;
            transition: color 0.3s;
        }
        
        .footer-link:hover {
            color: var(--secondary);
            text-decoration: underline;
        }
        
        /* 响应式设计 */
        @media (max-width: 768px) {
            h1 {
                font-size: 2.2rem;
            }
            
            .controls {
                grid-template-columns: 1fr;
            }
            
            .chip-container {
                width: 280px;
                height: 200px;
            }
            
            .button-group {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>74HC573锁存器交互式仿真学习平台</h1>
            <p class="subtitle">通过交互式仿真和分步操作指南，深入理解74HC573锁存器工作原理</p>
            <div class="header-icons">
                <i class="fas fa-microchip header-icon"></i>
                <i class="fas fa-code header-icon"></i>
                <i class="fas fa-bolt header-icon"></i>
            </div>
        </header>
        
        <div class="main-content">
            <section class="simulator-section">
                <div class="section-header">
                    <i class="fas fa-play-circle"></i>
                    <h2 class="section-title">74HC573 锁存器仿真模拟器</h2>
                </div>
                <div class="simulator-container">
                    <div class="guide-panel">
                        <h3 class="guide-title"><i class="fas fa-list-ol"></i> 仿真器操作指南</h3>
                        <ol class="guide-steps">
                            <li>点击"随机数据"生成输入信号</li>
                            <li>点击"LE=高电平"让芯片接收输入数据</li>
                            <li>点击"LE=低电平"锁定当前数据</li>
                            <li>点击"OE=低电平"允许数据输出</li>
                            <li>尝试在锁定状态下改变输入数据，观察输出变化</li>
                        </ol>
                    </div>
                    
                    <div class="chip-container">
                        <div class="chip-body">
                            <div class="chip-name">74HC573</div>
                            <div class="chip-type">八进制透明锁存器</div>
                            <div class="chip-pins">
                                <div class="left-pins">
                                    <div class="pin pin-left input" id="pin-le">
                                        <span class="pin-label">LE</span>
                                        <div class="pin-dot"></div>
                                    </div>
                                    <div class="pin pin-left input" id="pin-d0">
                                        <span class="pin-label">D0</span>
                                        <div class="pin-dot"></div>
                                    </div>
                                    <div class="pin pin-left input" id="pin-d1">
                                        <span class="pin-label">D1</span>
                                        <div class="pin-dot"></div>
                                    </div>
                                    <div class="pin pin-left input" id="pin-d2">
                                        <span class="pin-label">D2</span>
                                        <div class="pin-dot"></div>
                                    </div>
                                    <div class="pin pin-left input" id="pin-d3">
                                        <span class="pin-label">D3</span>
                                        <div class="pin-dot"></div>
                                    </div>
                                    <div class="pin pin-left input" id="pin-d4">
                                        <span class="pin-label">D4</span>
                                        <div class="pin-dot"></div>
                                    </div>
                                    <div class="pin pin-left input" id="pin-d5">
                                        <span class="pin-label">D5</span>
                                        <div class="pin-dot"></div>
                                    </div>
                                    <div class="pin pin-left input" id="pin-d6">
                                        <span class="pin-label">D6</span>
                                        <div class="pin-dot"></div>
                                    </div>
                                    <div class="pin pin-left input" id="pin-d7">
                                        <span class="pin-label">D7</span>
                                        <div class="pin-dot"></div>
                                    </div>
                                </div>
                                <div class="right-pins">
                                    <div class="pin pin-right output" id="pin-q0">
                                        <div class="pin-dot"></div>
                                        <span class="pin-label">Q0</span>
                                    </div>
                                    <div class="pin pin-right output" id="pin-q1">
                                        <div class="pin-dot"></div>
                                        <span class="pin-label">Q1</span>
                                    </div>
                                    <div class="pin pin-right output" id="pin-q2">
                                        <div class="pin-dot"></div>
                                        <span class="pin-label">Q2</span>
                                    </div>
                                    <div class="pin pin-right output" id="pin-q3">
                                        <div class="pin-dot"></div>
                                        <span class="pin-label">Q3</span>
                                    </div>
                                    <div class="pin pin-right output" id="pin-q4">
                                        <div class="pin-dot"></div>
                                        <span class="pin-label">Q4</span>
                                    </div>
                                    <div class="pin pin-right output" id="pin-q5">
                                        <div class="pin-dot"></div>
                                        <span class="pin-label">Q5</span>
                                    </div>
                                    <div class="pin pin-right output" id="pin-q6">
                                        <div class="pin-dot"></div>
                                        <span class="pin-label">Q6</span>
                                    </div>
                                    <div class="pin pin-right output" id="pin-q7">
                                        <div class="pin-dot"></div>
                                        <span class="pin-label">Q7</span>
                                    </div>
                                    <div class="pin pin-right input" id="pin-oe">
                                        <div class="pin-dot"></div>
                                        <span class="pin-label">OE</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="data-flow">
                        <div class="input-label">输入 D0-D7</div>
                        <div class="arrow" id="data-arrow">➡️</div>
                        <div class="output-label">输出 Q0-Q7</div>
                    </div>
                    
                    <div class="status-panel">
                        <div class="status-item">
                            <span class="status-label">锁存使能 (LE):</span>
                            <span class="status-value" id="le-status-text">低电平 (数据锁定)</span>
                        </div>
                        <div class="status-item">
                            <span class="status-label">输出使能 (OE):</span>
                            <span class="status-value" id="oe-status-text">高电平 (输出禁用)</span>
                        </div>
                        <div class="status-item">
                            <span class="status-label">工作模式:</span>
                            <span class="status-value" id="mode-description">数据锁定中，输出保持不变</span>
                        </div>
                    </div>
                    
                    <div class="controls">
                        <div class="control-group">
                            <h3 class="control-title">输入数据 (D0-D7)</h3>
                            <p>点击切换数据位状态（0/1）</p>
                            <div class="bits-container" id="input-bits">
                                <div class="bit" data-bit="0">D0</div>
                                <div class="bit" data-bit="1">D1</div>
                                <div class="bit" data-bit="2">D2</div>
                                <div class="bit" data-bit="3">D3</div>
                                <div class="bit" data-bit="4">D4</div>
                                <div class="bit" data-bit="5">D5</div>
                                <div class="bit" data-bit="6">D6</div>
                                <div class="bit" data-bit="7">D7</div>
                            </div>
                            
                            <div class="button-group">
                                <button class="btn" id="random-data">随机数据</button>
                                <button class="btn" id="clear-data">清零数据</button>
                            </div>
                        </div>
                        
                        <div class="control-group">
                            <h3 class="control-title">输出数据 (Q0-Q7)</h3>
                            <p>锁存器的输出状态</p>
                            <div class="bits-container" id="output-bits">
                                <div class="bit output" data-bit="0">Q0</div>
                                <div class="bit output" data-bit="1">Q1</div>
                                <div class="bit output" data-bit="2">Q2</div>
                                <div class="bit output" data-bit="3">Q3</div>
                                <div class="bit output" data-bit="4">Q4</div>
                                <div class="bit output" data-bit="5">Q5</div>
                                <div class="bit output" data-bit="6">Q6</div>
                                <div class="bit output" data-bit="7">Q7</div>
                            </div>
                            
                            <h3 class="control-title">控制信号</h3>
                            <div class="button-group">
                                <button class="btn" id="le-high">LE=高电平</button>
                                <button class="btn active" id="le-low">LE=低电平</button>
                                <button class="btn warning" id="oe-high">OE=高电平</button>
                                <button class="btn" id="oe-low">OE=低电平</button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            
            <section class="cards-section">
                <div class="section-header">
                    <i class="fas fa-graduation-cap"></i>
                    <h2 class="section-title">知识卡片</h2>
                </div>
                <div class="cards-container">
                    <!-- 卡片1：程序概述与源代码 -->
                    <div class="card active">
                        <div class="card-header">
                            <i class="fas fa-code card-icon"></i>
                            <h3 class="card-title">程序概述与源代码</h3>
                        </div>
                        <div class="card-content">
                            <p>这个单片机程序控制两个锁存器芯片，让数码管显示数字。程序会不断重复执行，快速切换显示内容，利用人眼视觉暂留效应，看起来像是同时显示。</p>
                            
                            <div class="code-block">
                                <div class="code-line"><span class="code-keyword">#include</span> &lt;reg52.h&gt;</div>
                                <br>
                                <div class="code-line"><span class="code-keyword">sbit</span> <span class="code-var">DS</span> = P2^2;</div>
                                <div class="code-line"><span class="code-keyword">sbit</span> <span class="code-var">WS</span> = P2^3;</div>
                                <br>
                                <div class="code-line"><span class="code-keyword">void</span> <span class="code-function">delay_ms</span>(<span class="code-keyword">unsigned</span> <span class="code-keyword">int</span> ms){</div>
                                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">unsigned</span> <span class="code-keyword">int</span> i, j;</div>
                                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">for</span>(i = ms; i > <span class="code-value">0</span>; i--){</div>
                                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">for</span>(j = <span class="code-value">112</span>; j > <span class="code-value">0</span>; j--);</div>
                                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;}</div>
                                <div class="code-line">}</div>
                                <br>
                                <div class="code-line"><span class="code-keyword">void</span> <span class="code-function">main</span>(){</div>
                                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">while</span>(<span class="code-value">1</span>){</div>
                                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;P1 = <span class="code-value">0x3F</span>; <span class="code-comment">// 发送显示"0"的信号</span></div>
                                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DS = <span class="code-value">1</span>; <span class="code-comment">// 准备锁存</span></div>
                                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DS = <span class="code-value">0</span>; <span class="code-comment">// 执行锁存</span></div>
                                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div>
                                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;P1 = <span class="code-value">0x5B</span>; <span class="code-comment">// 发送显示"2"的信号</span></div>
                                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WS = <span class="code-value">1</span>; <span class="code-comment">// 准备锁存</span></div>
                                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WS = <span class="code-value">0</span>; <span class="code-comment">// 执行锁存</span></div>
                                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;}</div>
                                <div class="code-line">}</div>
                            </div>
                            
                            <div class="analogy">
                                <strong>生活比喻：</strong> 就像你快速在两个纸上分别写数字，然后快速切换展示，看起来像是两个数字同时出现。
                            </div>
                        </div>
                    </div>
                    
                    <!-- 卡片2：头文件与引脚定义 -->
                    <div class="card">
                        <div class="card-header">
                            <i class="fas fa-cog card-icon"></i>
                            <h3 class="card-title">头文件与引脚定义</h3>
                        </div>
                        <div class="card-content">
                            <p>这部分代码定义了程序所需的硬件资源和引脚连接：</p>
                            
                            <ul class="explanation-list">
                                <li><span class="highlight">#include &lt;reg52.h&gt;</span> - 引入8051单片机的寄存器定义文件，相当于单片机的"说明书"</li>
                                <li><span class="highlight">sbit DS = P2^2;</span> - 定义P2端口的第2个引脚为DS（数据锁存）</li>
                                <li><span class="highlight">sbit WS = P2^3;</span> - 定义P2端口的第3个引脚为WS（位选锁存）</li>
                            </ul>
                            
                            <div class="analogy">
                                <strong>生活比喻：</strong> 就像给家里的电灯开关贴标签，方便记忆和使用。
                            </div>
                        </div>
                    </div>
                    
                    <!-- 卡片3：74HC573锁存器详解 -->
                    <div class="card">
                        <div class="card-header">
                            <i class="fas fa-microchip card-icon"></i>
                            <h3 class="card-title">74HC573锁存器详解</h3>
                        </div>
                        <div class="card-content">
                            <p>74HC573是一个8位锁存器，可以把它想象成一个<span class="highlight">数据保安亭</span>。</p>
                            
                            <h3>工作原理：</h3>
                            <ul class="explanation-list">
                                <li><strong>LE=1（大门敞开）</strong>：数据从入口(D0-D7)直接流到出口(Q0-Q7)</li>
                                <li><strong>LE从1变0（关门锁存）</strong>：把当前数据"锁住"，即使入口数据变化，出口也保持不变</li>
                                <li><strong>OE=0（输出使能）</strong>：输出有效，可以读取数据</li>
                                <li><strong>OE=1（输出禁用）</strong>：输出高阻态，相当于断开连接</li>
                            </ul>
                            
                            <h3>程序中的应用：</h3>
                            <p>程序使用了两个74HC573：</p>
                            <ul class="explanation-list">
                                <li><strong>第一个（DS控制）</strong>：负责控制数码管显示什么数字</li>
                                <li><strong>第二个（WS控制）</strong>：负责控制哪个数码管亮</li>
                            </ul>
                            
                            <div class="analogy">
                                <strong>生活比喻：</strong> 单片机只有一双手(P1口)，但通过两个助手(锁存器)，就能同时完成多个任务！
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>
        
        <footer>
            <p>74HC573锁存器交互式仿真学习平台 | 专为初学者设计的交互式学习体验</p>
            <div class="footer-links">
                <a href="#" class="footer-link">关于我们</a>
                <a href="#" class="footer-link">更多资源</a>
                <a href="#" class="footer-link">联系我们</a>
            </div>
        </footer>
    </div>

    <script>
        // 锁存器仿真逻辑
        document.addEventListener('DOMContentLoaded', function() {
            const inputBits = document.querySelectorAll('#input-bits .bit');
            const outputBits = document.querySelectorAll('#output-bits .bit');
            const leHighBtn = document.getElementById('le-high');
            const leLowBtn = document.getElementById('le-low');
            const oeHighBtn = document.getElementById('oe-high');
            const oeLowBtn = document.getElementById('oe-low');
            const randomDataBtn = document.getElementById('random-data');
            const clearDataBtn = document.getElementById('clear-data');
            const leStatusText = document.getElementById('le-status-text');
            const oeStatusText = document.getElementById('oe-status-text');
            const modeDescription = document.getElementById('mode-description');
            const dataArrow = document.getElementById('data-arrow');
            
            // 锁存器状态
            let latchEnabled = false;
            let outputEnabled = false;
            let latchedValues = [0, 0, 0, 0, 0, 0, 0, 0];
            let currentValues = [0, 0, 0, 0, 0, 0, 0, 0];
            
            // 初始化输入位
            inputBits.forEach(bit => {
                bit.addEventListener('click', function() {
                    const bitIndex = parseInt(this.getAttribute('data-bit'));
                    currentValues[bitIndex] = currentValues[bitIndex] === 0 ? 1 : 0;
                    updateDisplay();
                });
            });
            
            // LE高电平按钮
            leHighBtn.addEventListener('click', function() {
                latchEnabled = true;
                updateButtons();
                updateStatus();
                updateDisplay();
            });
            
            // LE低电平按钮
            leLowBtn.addEventListener('click', function() {
                latchEnabled = false;
                // 锁存当前值
                latchedValues = [...currentValues];
                updateButtons();
                updateStatus();
                updateDisplay();
            });
            
            // OE高电平按钮
            oeHighBtn.addEventListener('click', function() {
                outputEnabled = false;
                updateButtons();
                updateStatus();
                updateDisplay();
            });
            
            // OE低电平按钮
            oeLowBtn.addEventListener('click', function() {
                outputEnabled = true;
                updateButtons();
                updateStatus();
                updateDisplay();
            });
            
            // 随机数据按钮
            randomDataBtn.addEventListener('click', function() {
                for (let i = 0; i < 8; i++) {
                    currentValues[i] = Math.random() > 0.5 ? 1 : 0;
                }
                updateDisplay();
            });
            
            // 清零数据按钮
            clearDataBtn.addEventListener('click', function() {
                currentValues = [0, 0, 0, 0, 0, 0, 0, 0];
                updateDisplay();
            });
            
            // 更新按钮状态
            function updateButtons() {
                leHighBtn.classList.toggle('active', latchEnabled);
                leLowBtn.classList.toggle('active', !latchEnabled);
                oeHighBtn.classList.toggle('active', !outputEnabled);
                oeLowBtn.classList.toggle('active', outputEnabled);
            }
            
            // 更新状态显示
            function updateStatus() {
                leStatusText.textContent = latchEnabled ? "高电平 (数据透明)" : "低电平 (数据锁定)";
                leStatusText.classList.toggle('active', latchEnabled);
                
                oeStatusText.textContent = outputEnabled ? "低电平 (输出使能)" : "高电平 (输出禁用)";
                oeStatusText.classList.toggle('active', outputEnabled);
                
                if (latchEnabled) {
                    modeDescription.textContent = "数据透明模式，输出跟随输入变化";
                    dataArrow.classList.add('active');
                } else {
                    modeDescription.textContent = "数据锁定模式，输出保持不变";
                    dataArrow.classList.remove('active');
                }
                
                if (!outputEnabled) {
                    modeDescription.textContent = "输出禁用，输出为高阻态";
                }
            }
            
            // 更新显示
            function updateDisplay() {
                // 更新输入位显示
                inputBits.forEach(bit => {
                    const bitIndex = parseInt(bit.getAttribute('data-bit'));
                    if (currentValues[bitIndex] === 1) {
                        bit.classList.add('active');
                        document.getElementById(`pin-d${bitIndex}`).classList.add('active');
                    } else {
                        bit.classList.remove('active');
                        document.getElementById(`pin-d${bitIndex}`).classList.remove('active');
                    }
                });
                
                // 更新LE和OE引脚显示
                document.getElementById('pin-le').classList.toggle('active', latchEnabled);
                document.getElementById('pin-oe').classList.toggle('active', outputEnabled);
                
                // 更新输出位显示
                outputBits.forEach(bit => {
                    const bitIndex = parseInt(bit.getAttribute('data-bit'));
                    let outputValue;
                    
                    if (!outputEnabled) {
                        // 输出禁用，高阻态
                        outputValue = 0;
                        bit.classList.remove('active');
                        document.getElementById(`pin-q${bitIndex}`).classList.remove('active');
                    } else if (latchEnabled) {
                        // 透明模式，输出跟随输入
                        outputValue = currentValues[bitIndex];
                    } else {
                        // 锁存模式，输出保持锁存值
                        outputValue = latchedValues[bitIndex];
                    }
                    
                    if (outputEnabled) {
                        if (outputValue === 1) {
                            bit.classList.add('active');
                            document.getElementById(`pin-q${bitIndex}`).classList.add('active');
                        } else {
                            bit.classList.remove('active');
                            document.getElementById(`pin-q${bitIndex}`).classList.remove('active');
                        }
                    }
                });
            }
            
            // 卡片交互逻辑
            const cards = document.querySelectorAll('.card');
            
            cards.forEach(card => {
                card.addEventListener('click', function() {
                    // 如果点击的是已激活的卡片，则不处理
                    if (this.classList.contains('active')) return;
                    
                    // 关闭所有卡片
                    cards.forEach(c => c.classList.remove('active'));
                    
                    // 打开当前卡片
                    this.classList.add('active');
                });
            });
            
            // 初始更新显示
            updateButtons();
            updateStatus();
            updateDisplay();
        });
    </script>
</body>
</html>